{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\katzi\\\\OneDrive\\\\\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\\\\New folder (2)\\\\SocialNetwork\\\\EffiSocial\\\\client\\\\src\\\\components\\\\AddFriend.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, TextField, Button, List, ListItem, ListItemAvatar, ListItemText, Avatar, IconButton, Paper, Typography, CircularProgress, Alert } from '@mui/material';\nimport { Person as PersonIcon, PersonAdd as PersonAddIcon } from '@mui/icons-material';\nimport { users } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddFriend = () => {\n  _s();\n  var _searchResults$data, _searchMutation$error;\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  console.log('=== AddFriend Component ===');\n  console.log('Auth user:', user);\n  const searchMutation = useMutation({\n    mutationFn: async query => {\n      console.log('=== Search Mutation Function ===');\n      console.log('Search query:', query);\n      console.log('Current auth user:', user);\n      const response = await users.search(query);\n      console.log('Search mutation response:', response);\n      return response;\n    },\n    onSuccess: data => {\n      console.log('=== Search Mutation Success ===');\n      console.log('Search results data:', data);\n      setSearchResults(data);\n      setError(null);\n    },\n    onError: error => {\n      var _error$response, _error$response2, _error$response3, _error$response3$data;\n      console.error('=== Search Mutation Error ===');\n      console.error('Error details:', {\n        message: error.message,\n        response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n        status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n      });\n      setError(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Error searching users');\n    }\n  });\n\n  // Debounced search effect\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (searchQuery.trim().length >= 3) {\n        console.log('=== Debounced Search ===');\n        console.log('Search query:', searchQuery);\n        console.log('Current auth user:', user);\n        setLoading(true);\n        searchMutation.mutate(searchQuery, {\n          onSettled: () => {\n            console.log('=== Search Settled ===');\n            setLoading(false);\n          }\n        });\n      }\n    }, 500); // 500ms debounce\n\n    return () => clearTimeout(timer);\n  }, [searchQuery]);\n  const sendRequestMutation = useMutation({\n    mutationFn: async userId => {\n      console.log('=== Send Request Mutation Function ===');\n      console.log('Sending friend request to:', userId);\n      console.log('Current auth user:', user);\n      const response = await users.sendFriendRequest(userId, (user === null || user === void 0 ? void 0 : user.id) || (user === null || user === void 0 ? void 0 : user._id));\n      console.log('Send request mutation response:', response);\n      return response;\n    },\n    onSuccess: data => {\n      console.log('=== Send Request Mutation Success ===');\n      console.log('Friend request sent successfully:', data);\n      setError(null);\n      // Optionally refresh search results\n      if (searchQuery) {\n        searchMutation.mutate(searchQuery);\n      }\n    },\n    onError: error => {\n      var _error$response4, _error$response5, _error$response6, _error$response6$data;\n      console.error('=== Send Request Mutation Error ===');\n      console.error('Error details:', {\n        message: error.message,\n        response: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data,\n        status: (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status\n      });\n      setError(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || 'Error sending friend request');\n    }\n  });\n  const handleSendRequest = async userId => {\n    console.log('handleSendRequest called with:', {\n      userId,\n      user\n    });\n    try {\n      const result = await sendRequestMutation.mutateAsync(userId);\n      console.log('Friend request sent successfully:', result);\n    } catch (error) {\n      console.error('Send request error:', error);\n    }\n  };\n  const handleProfileClick = userId => {\n    console.log('Navigating to profile:', userId);\n    navigate(`/profile/${userId}`);\n  };\n\n  // Filter out current user from search results\n  const usersList = (searchResults === null || searchResults === void 0 ? void 0 : (_searchResults$data = searchResults.data) === null || _searchResults$data === void 0 ? void 0 : _searchResults$data.filter(searchUser => {\n    const isNotCurrentUser = searchUser._id !== ((user === null || user === void 0 ? void 0 : user.id) || (user === null || user === void 0 ? void 0 : user._id));\n    console.log('Filtering user:', {\n      searchUserId: searchUser._id,\n      currentUserId: (user === null || user === void 0 ? void 0 : user.id) || (user === null || user === void 0 ? void 0 : user._id),\n      isNotCurrentUser\n    });\n    return isNotCurrentUser;\n  })) || [];\n  const getFriendButtonState = searchUser => {\n    var _searchUser$friends, _searchUser$friendReq, _searchUser$friendReq2;\n    const isFriend = (_searchUser$friends = searchUser.friends) === null || _searchUser$friends === void 0 ? void 0 : _searchUser$friends.includes(user === null || user === void 0 ? void 0 : user._id);\n    const hasPendingRequest = (_searchUser$friendReq = searchUser.friendRequests) === null || _searchUser$friendReq === void 0 ? void 0 : _searchUser$friendReq.some(request => request.from === (user === null || user === void 0 ? void 0 : user._id) && request.status === 'pending');\n    const hasReceivedRequest = (_searchUser$friendReq2 = searchUser.friendRequests) === null || _searchUser$friendReq2 === void 0 ? void 0 : _searchUser$friendReq2.some(request => request.to === (user === null || user === void 0 ? void 0 : user._id) && request.status === 'pending');\n    if (isFriend) {\n      return {\n        text: 'Friends',\n        disabled: true,\n        icon: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 55\n        }, this)\n      };\n    } else if (hasPendingRequest) {\n      return {\n        text: 'Request Sent',\n        disabled: true,\n        icon: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 60\n        }, this)\n      };\n    } else if (hasReceivedRequest) {\n      return {\n        text: 'Respond to Request',\n        disabled: true,\n        icon: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 66\n        }, this)\n      };\n    } else {\n      return {\n        text: 'Add Friend',\n        disabled: false,\n        icon: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 59\n        }, this)\n      };\n    }\n  };\n  console.log('=== Search Results Processing ===');\n  console.log('Raw search results:', searchResults);\n  console.log('Current auth user:', user);\n  console.log('Filtered users list:', usersList);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 2\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"Add Friends\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      fullWidth: true,\n      variant: \"outlined\",\n      placeholder: \"Search by username...\",\n      value: searchQuery,\n      onChange: e => {\n        setSearchQuery(e.target.value);\n        setError(null);\n      },\n      sx: {\n        mb: 2\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), (error || searchMutation.error) && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error || ((_searchMutation$error = searchMutation.error) === null || _searchMutation$error === void 0 ? void 0 : _searchMutation$error.message) || 'An error occurred'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        p: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }, this) : searchQuery.length >= 3 ? /*#__PURE__*/_jsxDEV(List, {\n      children: [usersList.map(user => {\n        const buttonState = getFriendButtonState(user);\n        return /*#__PURE__*/_jsxDEV(ListItem, {\n          secondaryAction: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            startIcon: buttonState.icon,\n            onClick: () => handleSendRequest(user._id),\n            disabled: buttonState.disabled || sendRequestMutation.isLoading,\n            children: buttonState.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 19\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: user.profilePicture ? `http://localhost:5000${user.profilePicture}` : undefined,\n              alt: user.username,\n              onClick: () => handleProfileClick(user._id),\n              sx: {\n                cursor: 'pointer'\n              },\n              children: /*#__PURE__*/_jsxDEV(PersonIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n            primary: /*#__PURE__*/_jsxDEV(Typography, {\n              component: \"span\",\n              onClick: () => handleProfileClick(user._id),\n              sx: {\n                cursor: 'pointer',\n                '&:hover': {\n                  textDecoration: 'underline'\n                }\n              },\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 17\n          }, this)]\n        }, user._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }, this);\n      }), usersList.length === 0 && searchQuery.length >= 3 && /*#__PURE__*/_jsxDEV(ListItem, {\n        children: /*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: \"No users found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this) : searchQuery.length > 0 && searchQuery.length < 3 ? /*#__PURE__*/_jsxDEV(Typography, {\n      color: \"text.secondary\",\n      sx: {\n        p: 2\n      },\n      children: \"Type at least 3 characters to search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_s(AddFriend, \"AuD67RMtNbSa1cqR/YEN4ASykyc=\", false, function () {\n  return [useAuth, useNavigate, useQueryClient, useMutation, useMutation];\n});\n_c = AddFriend;\nexport default AddFriend;\nvar _c;\n$RefreshReg$(_c, \"AddFriend\");","map":{"version":3,"names":["React","useState","useEffect","useQuery","useMutation","useQueryClient","useNavigate","Box","TextField","Button","List","ListItem","ListItemAvatar","ListItemText","Avatar","IconButton","Paper","Typography","CircularProgress","Alert","Person","PersonIcon","PersonAdd","PersonAddIcon","users","useAuth","jsxDEV","_jsxDEV","AddFriend","_s","_searchResults$data","_searchMutation$error","user","navigate","queryClient","searchQuery","setSearchQuery","searchResults","setSearchResults","loading","setLoading","error","setError","console","log","searchMutation","mutationFn","query","response","search","onSuccess","data","onError","_error$response","_error$response2","_error$response3","_error$response3$data","message","status","timer","setTimeout","trim","length","mutate","onSettled","clearTimeout","sendRequestMutation","userId","sendFriendRequest","id","_id","_error$response4","_error$response5","_error$response6","_error$response6$data","handleSendRequest","result","mutateAsync","handleProfileClick","usersList","filter","searchUser","isNotCurrentUser","searchUserId","currentUserId","getFriendButtonState","_searchUser$friends","_searchUser$friendReq","_searchUser$friendReq2","isFriend","friends","includes","hasPendingRequest","friendRequests","some","request","from","hasReceivedRequest","to","text","disabled","icon","fileName","_jsxFileName","lineNumber","columnNumber","sx","p","children","variant","gutterBottom","fullWidth","placeholder","value","onChange","e","target","mb","severity","display","justifyContent","map","buttonState","secondaryAction","size","startIcon","onClick","isLoading","src","profilePicture","undefined","alt","username","cursor","primary","component","textDecoration","color","_c","$RefreshReg$"],"sources":["C:/Users/katzi/OneDrive/מסמכים/New folder (2)/SocialNetwork/EffiSocial/client/src/components/AddFriend.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Button,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Avatar,\r\n  IconButton,\r\n  Paper,\r\n  Typography,\r\n  CircularProgress,\r\n  Alert,\r\n} from '@mui/material';\r\nimport {\r\n  Person as PersonIcon,\r\n  PersonAdd as PersonAddIcon,\r\n} from '@mui/icons-material';\r\nimport { users } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst AddFriend = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const queryClient = useQueryClient();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  console.log('=== AddFriend Component ===');\r\n  console.log('Auth user:', user);\r\n\r\n  const searchMutation = useMutation({\r\n    mutationFn: async (query) => {\r\n      console.log('=== Search Mutation Function ===');\r\n      console.log('Search query:', query);\r\n      console.log('Current auth user:', user);\r\n      const response = await users.search(query);\r\n      console.log('Search mutation response:', response);\r\n      return response;\r\n    },\r\n    onSuccess: (data) => {\r\n      console.log('=== Search Mutation Success ===');\r\n      console.log('Search results data:', data);\r\n      setSearchResults(data);\r\n      setError(null);\r\n    },\r\n    onError: (error) => {\r\n      console.error('=== Search Mutation Error ===');\r\n      console.error('Error details:', {\r\n        message: error.message,\r\n        response: error.response?.data,\r\n        status: error.response?.status\r\n      });\r\n      setError(error.response?.data?.error || 'Error searching users');\r\n    }\r\n  });\r\n\r\n  // Debounced search effect\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (searchQuery.trim().length >= 3) {\r\n        console.log('=== Debounced Search ===');\r\n        console.log('Search query:', searchQuery);\r\n        console.log('Current auth user:', user);\r\n        setLoading(true);\r\n        searchMutation.mutate(searchQuery, {\r\n          onSettled: () => {\r\n            console.log('=== Search Settled ===');\r\n            setLoading(false);\r\n          }\r\n        });\r\n      }\r\n    }, 500); // 500ms debounce\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [searchQuery]);\r\n\r\n  const sendRequestMutation = useMutation({\r\n    mutationFn: async (userId) => {\r\n      console.log('=== Send Request Mutation Function ===');\r\n      console.log('Sending friend request to:', userId);\r\n      console.log('Current auth user:', user);\r\n      const response = await users.sendFriendRequest(userId, user?.id || user?._id);\r\n      console.log('Send request mutation response:', response);\r\n      return response;\r\n    },\r\n    onSuccess: (data) => {\r\n      console.log('=== Send Request Mutation Success ===');\r\n      console.log('Friend request sent successfully:', data);\r\n      setError(null);\r\n      // Optionally refresh search results\r\n      if (searchQuery) {\r\n        searchMutation.mutate(searchQuery);\r\n      }\r\n    },\r\n    onError: (error) => {\r\n      console.error('=== Send Request Mutation Error ===');\r\n      console.error('Error details:', {\r\n        message: error.message,\r\n        response: error.response?.data,\r\n        status: error.response?.status\r\n      });\r\n      setError(error.response?.data?.error || 'Error sending friend request');\r\n    }\r\n  });\r\n\r\n  const handleSendRequest = async (userId) => {\r\n    console.log('handleSendRequest called with:', { userId, user });\r\n    try {\r\n      const result = await sendRequestMutation.mutateAsync(userId);\r\n      console.log('Friend request sent successfully:', result);\r\n    } catch (error) {\r\n      console.error('Send request error:', error);\r\n    }\r\n  };\r\n\r\n  const handleProfileClick = (userId) => {\r\n    console.log('Navigating to profile:', userId);\r\n    navigate(`/profile/${userId}`);\r\n  };\r\n\r\n  // Filter out current user from search results\r\n  const usersList = searchResults?.data?.filter(searchUser => {\r\n    const isNotCurrentUser = searchUser._id !== (user?.id || user?._id);\r\n    console.log('Filtering user:', {\r\n      searchUserId: searchUser._id,\r\n      currentUserId: user?.id || user?._id,\r\n      isNotCurrentUser\r\n    });\r\n    return isNotCurrentUser;\r\n  }) || [];\r\n\r\n  const getFriendButtonState = (searchUser) => {\r\n    const isFriend = searchUser.friends?.includes(user?._id);\r\n    const hasPendingRequest = searchUser.friendRequests?.some(\r\n      request => request.from === user?._id && request.status === 'pending'\r\n    );\r\n    const hasReceivedRequest = searchUser.friendRequests?.some(\r\n      request => request.to === user?._id && request.status === 'pending'\r\n    );\r\n\r\n    if (isFriend) {\r\n      return { text: 'Friends', disabled: true, icon: <PersonAddIcon /> };\r\n    } else if (hasPendingRequest) {\r\n      return { text: 'Request Sent', disabled: true, icon: <PersonAddIcon /> };\r\n    } else if (hasReceivedRequest) {\r\n      return { text: 'Respond to Request', disabled: true, icon: <PersonAddIcon /> };\r\n    } else {\r\n      return { text: 'Add Friend', disabled: false, icon: <PersonAddIcon /> };\r\n    }\r\n  };\r\n\r\n  console.log('=== Search Results Processing ===');\r\n  console.log('Raw search results:', searchResults);\r\n  console.log('Current auth user:', user);\r\n  console.log('Filtered users list:', usersList);\r\n\r\n  return (\r\n    <Box sx={{ p: 2 }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Add Friends\r\n      </Typography>\r\n      <TextField\r\n        fullWidth\r\n        variant=\"outlined\"\r\n        placeholder=\"Search by username...\"\r\n        value={searchQuery}\r\n        onChange={(e) => {\r\n          setSearchQuery(e.target.value);\r\n          setError(null);\r\n        }}\r\n        sx={{ mb: 2 }}\r\n      />\r\n      {(error || searchMutation.error) && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error || searchMutation.error?.message || 'An error occurred'}\r\n        </Alert>\r\n      )}\r\n      {loading ? (\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', p: 2 }}>\r\n          <CircularProgress />\r\n        </Box>\r\n      ) : searchQuery.length >= 3 ? (\r\n        <List>\r\n          {usersList.map((user) => {\r\n            const buttonState = getFriendButtonState(user);\r\n            return (\r\n              <ListItem\r\n                key={user._id}\r\n                secondaryAction={\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    startIcon={buttonState.icon}\r\n                    onClick={() => handleSendRequest(user._id)}\r\n                    disabled={buttonState.disabled || sendRequestMutation.isLoading}\r\n                  >\r\n                    {buttonState.text}\r\n                  </Button>\r\n                }\r\n              >\r\n                <ListItemAvatar>\r\n                  <Avatar\r\n                    src={user.profilePicture ? `http://localhost:5000${user.profilePicture}` : undefined}\r\n                    alt={user.username}\r\n                    onClick={() => handleProfileClick(user._id)}\r\n                    sx={{ cursor: 'pointer' }}\r\n                  >\r\n                    <PersonIcon />\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText\r\n                  primary={\r\n                    <Typography\r\n                      component=\"span\"\r\n                      onClick={() => handleProfileClick(user._id)}\r\n                      sx={{ cursor: 'pointer', '&:hover': { textDecoration: 'underline' } }}\r\n                    >\r\n                      {user.username}\r\n                    </Typography>\r\n                  }\r\n                />\r\n              </ListItem>\r\n            );\r\n          })}\r\n          {usersList.length === 0 && searchQuery.length >= 3 && (\r\n            <ListItem>\r\n              <ListItemText primary=\"No users found\" />\r\n            </ListItem>\r\n          )}\r\n        </List>\r\n      ) : searchQuery.length > 0 && searchQuery.length < 3 ? (\r\n        <Typography color=\"text.secondary\" sx={{ p: 2 }}>\r\n          Type at least 3 characters to search\r\n        </Typography>\r\n      ) : null}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AddFriend; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}